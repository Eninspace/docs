<!DOCTYPE html>
<html lang="en" class=''>

<head>
    <meta charset="utf-8">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>Smart Contracts - Fetch.ai Developer Documentation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <meta name="description" content="Everything you need to know about Fetch.ai.">
    <meta name="generator" content="mkdocs-1.0.4, mkdocs-">
    
    <meta name="author" content="developer@fetch.ai">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta rel="next" href="" />
    <script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>var base_url = '../..';</script>
    <link href="../../css/style.min.css" rel="stylesheet">
    <link href="../../css/my-styles.css" rel="stylesheet"> 
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/392c70381a.js" crossorigin="anonymous" SameSite="None" Secure></script>
</head>

<body>
    <div id="page-container">
        <div id="content-wrap">

            <div id="mkdocs-search-wrapper">
                <div class="search-results-container">
                    <header>Search results: <input type="text" id="search-text-copy" />
                        <button id="closeSearchResults">&times;</button>
                    </header>
                    <div id="mkdocs-search-results" class="search-popup">
                        Sorry, page not found.
                    </div><!-- #mkdocs-search-results end -->
                </div><!-- .search-results-container -->
            </div><!-- #mkdocs-search-wrapper end -->

            <header>
                <button id='hamburger'><i class="fas fa-bars"></i><i class="fas fa-times"></i></button>
                <div class="corset">
                    <a href="https://fetch.ai" target="_blank">
                        <img src="../../assets/images/fetchai_logo_align_white.svg" alt="Fetch Logo" class="logo">
                    </a>
                    <nav class="menu">
                        <ul>
                            <li><a href="https://developer.fetch.ai/bounties">Bounty</a></li>
                            <li><a href="https://blockexplorer-alpha.fetch-ai.com/">Explorer</a></li>
                            <li><a href="http://build.fetch.ai">Build</a></li>
                            <li><a href="http://developer.fetch.ai/#links">Links</a></li>
                            <li><a href="https://docs.fetch.ai/tutorials/">Tutorials</a></li>
                        </ul>
                    </nav>
                </div><!-- .corset -->
            </header>
            <div class="book">
                <div id="book-search-input" role="search">
                    <form action="search.html" id="searchForm">
                        <input name="q" id="mkdocs-search-query" type="text" placeholder="Type to search">
                    </form>
                </div> <!-- #book-search-input end -->

                <div class="book-summary not-loaded">
                    <div>

                        <nav role="navigation" id="nav">
    <ul class="summary" id="summary"> 
<li>
    <a href="/" id="-"
        >Home</a
    >
</li>
 
<li>
    <span class="head">Getting Started</span>
    <ul id="header_getting_started"> 
<li>
    <a href="../../getting-started/quickstart/" id="getting-started-quickstart-"
        >Quickstart</a
    >
</li>
 
<li>
    <a href="../../getting-started/versions/" id="getting-started-versions-"
        >Versions</a
    >
</li>
 
<li>
    <a href="../../getting-started/wallet/" id="getting-started-wallet-"
        >Wallets</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Walkthrough</span>
    <ul id="header_walkthrough"> 
<li>
    <a href="../" id="walkthrough-"
        >Introduction</a
    >
</li>
 
<li>
    <a href="../creating-addresses/" id="walkthrough-creating-addresses-"
        >Creating Addresses</a
    >
</li>
 
<li>
    <a href="../transfers-and-balances/" id="walkthrough-transfers-and-balances-"
        >Making Transfers</a
    >
</li>
 
<li>
    <a href="./" id="walkthrough-smart-contracts-"
        >Smart Contracts</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Ledger</span>
    <ul id="header_ledger"> 
<li>
    <a href="../../ledger/" id="ledger-"
        >Introduction</a
    >
</li>
 
<li>
    <a href="../../ledger/architecture/" id="ledger-architecture-"
        >Architecture</a
    >
</li>
 
<li>
    <span class="head">Usage</span>
    <ul id="header_usage"> 
<li>
    <span class="head">Installation</span>
    <ul id="header_installation"> 
<li>
    <a href="../../getting-started/installation-mac/" id="getting-started-installation-mac-"
        >MacOS</a
    >
</li>
 
<li>
    <a href="../../getting-started/installation-ubuntu/" id="getting-started-installation-ubuntu-"
        >Ubuntu</a
    >
</li>
 
<li>
    <a href="../../getting-started/installation-redhat/" id="getting-started-installation-redhat-"
        >Redhat</a
    >
</li>

    </ul>
</li> 
<li>
    <a href="../../ledger/running-a-constellation/" id="ledger-running-a-constellation-"
        >Running a node</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Maths and ML</span>
    <ul id="header_maths_and_ml"> 
<li>
    <a href="../../ledger/maths-lib-overview/" id="ledger-maths-lib-overview-"
        >Maths library introduction</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Python API</span>
    <ul id="header_python_api"> 
<li>
    <a href="../../getting-started/python-api-install/" id="getting-started-python-api-install-"
        >Installation</a
    >
</li>
 
<li>
    <span class="head">Examples</span>
    <ul id="header_examples"> 
<li>
    <a href="../../ledger/python-ledger-api/examples/block-number/" id="ledger-python-ledger-api-examples-block-number-"
        >Block Number</a
    >
</li>

    </ul>
</li>
    </ul>
</li>
    </ul>
</li> 
<li>
    <span class="head">Agent Framework</span>
    <ul id="header_agent_framework"> 
<li>
    <a href="../../aea/" id="aea-"
        >Welcome</a
    >
</li>
 
<li>
    <span class="head">Getting started</span>
    <ul id="header_getting_started"> 
<li>
    <a href="../../aea/steps/" id="aea-steps-"
        >Ways to build an AEA</a
    >
</li>
 
<li>
    <a href="../../aea/quickstart/" id="aea-quickstart-"
        >AEA quick start</a
    >
</li>
 
<li>
    <a href="../../aea/aea-vs-mvc/" id="aea-aea-vs-mvc-"
        >AEA and web frameworks</a
    >
</li>
 
<li>
    <a href="../../aea/build-aea-step-by-step/" id="aea-build-aea-step-by-step-"
        >Build an AEA with the CLI</a
    >
</li>
 
<li>
    <a href="../../aea/skill-guide/" id="aea-skill-guide-"
        >Build a skill for an AEA</a
    >
</li>
 
<li>
    <a href="../../aea/build-aea-programmatically/" id="aea-build-aea-programmatically-"
        >Build an AEA programmatically</a
    >
</li>
 
<li>
    <a href="../../aea/agent-vs-aea/" id="aea-agent-vs-aea-"
        >AEAs vs Agents</a
    >
</li>
 
<li>
    <a href="../../aea/cli-vs-programmatic-aeas/" id="aea-cli-vs-programmatic-aeas-"
        >CLI vs programmatic AEAs</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">The AEA universe</span>
    <ul id="header_the_aea_universe"> 
<li>
    <a href="../../aea/agent-oriented-development/" id="aea-agent-oriented-development-"
        >Agent-oriented development</a
    >
</li>
 
<li>
    <a href="../../aea/vision/" id="aea-vision-"
        >Vision</a
    >
</li>
 
<li>
    <a href="../../aea/app-areas/" id="aea-app-areas-"
        >Application areas</a
    >
</li>
 
<li>
    <a href="../../aea/oef-ledger/" id="aea-oef-ledger-"
        >Relation to OEF and Ledger</a
    >
</li>
 
<li>
    <a href="../../aea/trust/" id="aea-trust-"
        >Trust issues</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Demo guides</span>
    <ul id="header_demo_guides"> 
<li>
    <a href="../../aea/car-park-skills/" id="aea-car-park-skills-"
        >Car park skills</a
    >
</li>
 
<li>
    <a href="../../aea/gym-example/" id="aea-gym-example-"
        >Gym example</a
    >
</li>
 
<li>
    <a href="../../aea/gym-skill/" id="aea-gym-skill-"
        >Gym skill</a
    >
</li>
 
<li>
    <a href="../../aea/ml-skills/" id="aea-ml-skills-"
        >ML skills</a
    >
</li>
 
<li>
    <a href="../../aea/tac-skills/" id="aea-tac-skills-"
        >TAC skills</a
    >
</li>
 
<li>
    <a href="../../aea/tac/" id="aea-tac-"
        >TAC external app</a
    >
</li>
 
<li>
    <a href="../../aea/thermometer-skills/" id="aea-thermometer-skills-"
        >Thermometer skills</a
    >
</li>
 
<li>
    <a href="../../aea/weather-skills/" id="aea-weather-skills-"
        >Weather skills</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Use cases</span>
    <ul id="header_use_cases"> 
<li>
    <a href="../../aea/generic-skills/" id="aea-generic-skills-"
        >Generic skills</a
    >
</li>
 
<li>
    <a href="../../aea/orm-integration-to-generic/" id="aea-orm-integration-to-generic-"
        >ORM integration</a
    >
</li>
 
<li>
    <a href="../../aea/connect-a-frontend/" id="aea-connect-a-frontend-"
        >Frontend intergration</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Step by step guides</span>
    <ul id="header_step_by_step_guides"> 
<li>
    <a href="../../aea/thermometer-skills-step-by-step/" id="aea-thermometer-skills-step-by-step-"
        >Thermometer skills step by step</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Architecture</span>
    <ul id="header_architecture"> 
<li>
    <a href="../../aea/design-principles/" id="aea-design-principles-"
        >Design principles</a
    >
</li>
 
<li>
    <a href="../../aea/diagram/" id="aea-diagram-"
        >Architectural diagram</a
    >
</li>
 
<li>
    <a href="../../aea/core-components/" id="aea-core-components-"
        >Core components</a
    >
</li>
 
<li>
    <a href="../../aea/file-structure/" id="aea-file-structure-"
        >File structure</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">CLI</span>
    <ul id="header_cli"> 
<li>
    <a href="../../aea/cli-how-to/" id="aea-cli-how-to-"
        >CLI tool</a
    >
</li>
 
<li>
    <a href="../../aea/cli-commands/" id="aea-cli-commands-"
        >Commands</a
    >
</li>
 
<li>
    <a href="../../aea/package-imports/" id="aea-package-imports-"
        >Package structure</a
    >
</li>
 
<li>
    <a href="../../aea/cli-gui/" id="aea-cli-gui-"
        >GUI</a
    >
</li>
 
<li>
    <a href="../../aea/wealth/" id="aea-wealth-"
        >Generating wealth</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Developer guides</span>
    <ul id="header_developer_guides"> 
<li>
    <a href="../../aea/version/" id="aea-version-"
        >Version</a
    >
</li>
 
<li>
    <a href="../../aea/skill/" id="aea-skill-"
        >Skill</a
    >
</li>
 
<li>
    <a href="../../aea/protocol/" id="aea-protocol-"
        >Protocol</a
    >
</li>
 
<li>
    <a href="../../aea/connection/" id="aea-connection-"
        >Connection</a
    >
</li>
 
<li>
    <a href="../../aea/scaffolding/" id="aea-scaffolding-"
        >Scaffolding packages</a
    >
</li>
 
<li>
    <a href="../../aea/generator/" id="aea-generator-"
        >Generating protocols</a
    >
</li>
 
<li>
    <a href="../../aea/logging/" id="aea-logging-"
        >Logging</a
    >
</li>
 
<li>
    <a href="../../aea/raspberry-set-up/" id="aea-raspberry-set-up-"
        >Build an AEA on a Raspberry Pi</a
    >
</li>
 
<li>
    <a href="../../aea/integration/" id="aea-integration-"
        >Using public ledgers</a
    >
</li>
 
<li>
    <a href="../../aea/multiplexer-standalone/" id="aea-multiplexer-standalone-"
        >Use multiplexer stand-alone</a
    >
</li>
 
<li>
    <a href="../../aea/standalone-transaction/" id="aea-standalone-transaction-"
        >Create stand-alone transaction</a
    >
</li>
 
<li>
    <a href="../../aea/decision-maker-transaction/" id="aea-decision-maker-transaction-"
        >Create decision-maker transaction</a
    >
</li>

    </ul>
</li> 
<li>
    <a href="../../aea/questions-and-answers/" id="aea-questions-and-answers-"
        >Q&A</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Machine Learning</span>
    <ul id="header_machine_learning"> 
<li>
    <a href="../../machine-learning/" id="machine-learning-"
        >Introduction</a
    >
</li>
 
<li>
    <a href="../../machine-learning/library-architecture/" id="machine-learning-library-architecture-"
        >Library architecture</a
    >
</li>
 
<li>
    <a href="../../machine-learning/smart-contract-example/" id="machine-learning-smart-contract-example-"
        >AI in smart contracts</a
    >
</li>
 
<li>
    <a href="../../machine-learning/synergetic-contract-example/" id="machine-learning-synergetic-contract-example-"
        >AI in synergetic contracts</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Etch Language</span>
    <ul id="header_etch_language"> 
<li>
    <a href="../../etch-language/" id="etch-language-"
        >Introduction</a
    >
</li>
 
<li>
    <span class="head">Usage</span>
    <ul id="header_usage"> 
<li>
    <a href="../../etch-language/getstarted/" id="etch-language-getstarted-"
        >Getting started</a
    >
</li>
 
<li>
    <a href="../../etch-language/debug/" id="etch-language-debug-"
        >Debugging</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">The Basics</span>
    <ul id="header_the_basics"> 
<li>
    <a href="../../etch-language/syntax/" id="etch-language-syntax-"
        >Syntax</a
    >
</li>
 
<li>
    <a href="../../etch-language/variables/" id="etch-language-variables-"
        >Variables</a
    >
</li>
 
<li>
    <a href="../../etch-language/operators/" id="etch-language-operators-"
        >Operators</a
    >
</li>
 
<li>
    <a href="../../etch-language/logic/" id="etch-language-logic-"
        >Logical operators</a
    >
</li>
 
<li>
    <a href="../../etch-language/control-flow/" id="etch-language-control-flow-"
        >Control flow</a
    >
</li>
 
<li>
    <a href="../../etch-language/strings/" id="etch-language-strings-"
        >Strings</a
    >
</li>
 
<li>
    <a href="../../etch-language/arrays/" id="etch-language-arrays-"
        >Arrays</a
    >
</li>
 
<li>
    <a href="../../etch-language/functions/" id="etch-language-functions-"
        >Functions</a
    >
</li>
 
<li>
    <span class="head">Function Annotations</span>
    <ul id="header_function_annotations"> 
<li>
    <a href="../../etch-language/sc-annotations/" id="etch-language-sc-annotations-"
        >Smart contract annotations</a
    >
</li>
 
<li>
    <a href="../../etch-language/syn-annotations/" id="etch-language-syn-annotations-"
        >Synergetic contract annotations</a
    >
</li>

    </ul>
</li> 
<li>
    <a href="../../etch-language/error-checking/" id="etch-language-error-checking-"
        >Error checking</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Fetch Ledger Types</span>
    <ul id="header_fetch_ledger_types"> 
<li>
    <a href="../../etch-language/persistent-globals/" id="etch-language-persistent-globals-"
        >Persistent globals</a
    >
</li>
 
<li>
    <a href="../../etch-language/states/" id="etch-language-states-"
        >State</a
    >
</li>
 
<li>
    <a href="../../etch-language/sharded-state/" id="etch-language-sharded-state-"
        >ShardedState</a
    >
</li>
 
<li>
    <a href="../../etch-language/addresses/" id="etch-language-addresses-"
        >Address</a
    >
</li>
 
<li>
    <a href="../../etch-language/crypto/" id="etch-language-crypto-"
        >Cryptographic functions</a
    >
</li>
 
<li>
    <a href="../../etch-language/context/" id="etch-language-context-"
        >Context</a
    >
</li>
 
<li>
    <a href="../../etch-language/transaction/" id="etch-language-transaction-"
        >Transaction</a
    >
</li>
 
<li>
    <a href="../../etch-language/balance-transfer/" id="etch-language-balance-transfer-"
        >Balance and Transfer</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Mathematics</span>
    <ul id="header_mathematics"> 
<li>
    <a href="../../etch-language/maths-functions/" id="etch-language-maths-functions-"
        >Maths functions</a
    >
</li>
 
<li>
    <a href="../../etch-language/tensor/" id="etch-language-tensor-"
        >Tensor</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Machine Learning</span>
    <ul id="header_machine_learning"> 
<li>
    <a href="../../etch-language/model/" id="etch-language-model-"
        >Model</a
    >
</li>
 
<li>
    <a href="../../etch-language/graph/" id="etch-language-graph-"
        >Graph</a
    >
</li>
 
<li>
    <a href="../../etch-language/data-loaders/" id="etch-language-data-loaders-"
        >DataLoader</a
    >
</li>
 
<li>
    <a href="../../etch-language/optimiser/" id="etch-language-optimiser-"
        >Optimiser</a
    >
</li>
 
<li>
    <a href="../../etch-language/scaler/" id="etch-language-scaler-"
        >Scaler</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Examples</span>
    <ul id="header_examples"> 
<li>
    <a href="../../etch-language/examples/fetch-logo/" id="etch-language-examples-fetch-logo-"
        >Fetch logo</a
    >
</li>
 
<li>
    <a href="../../etch-language/examples/mandelbrot/" id="etch-language-examples-mandelbrot-"
        >Mandelbrot</a
    >
</li>
 
<li>
    <a href="../../etch-language/examples/searching-algorithms/" id="etch-language-examples-searching-algorithms-"
        >Searching algorithms</a
    >
</li>
 
<li>
    <a href="../../etch-language/examples/sorting-algorithms/" id="etch-language-examples-sorting-algorithms-"
        >Sorting algorithms</a
    >
</li>
 
<li>
    <a href="../../etch-language/examples/dft/" id="etch-language-examples-dft-"
        >Discrete Fourier Transformation</a
    >
</li>

    </ul>
</li>
    </ul>
</li> 
<li>
    <span class="head">Smart Contracts</span>
    <ul id="header_smart_contracts"> 
<li>
    <a href="../../smart-contracts/smart-contract-intro/" id="smart-contracts-smart-contract-intro-"
        >Introduction</a
    >
</li>
 
<li>
    <a href="../../smart-contracts/static-dynamic/" id="smart-contracts-static-dynamic-"
        >Static and dynamic contracts</a
    >
</li>
 
<li>
    <span class="head">Fetch.ai smart contracts</span>
    <ul id="header_fetch.ai_smart_contracts"> 
<li>
    <a href="../../smart-contracts/etch-smart-contracts/" id="smart-contracts-etch-smart-contracts-"
        >Smart contracts in Etch</a
    >
</li>
 
<li>
    <a href="../../smart-contracts/pipenv/" id="smart-contracts-pipenv-"
        >Development environment</a
    >
</li>
 
<li>
    <a href="../../smart-contracts/executing-smart-contract-code/" id="smart-contracts-executing-smart-contract-code-"
        >Executing smart contracts</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Synergetic contracts</span>
    <ul id="header_synergetic_contracts"> 
<li>
    <a href="../../smart-contracts/synergetic/" id="smart-contracts-synergetic-"
        >Synergetic contracts</a
    >
</li>
 
<li>
    <a href="../../smart-contracts/executing-synergetic-code/" id="smart-contracts-executing-synergetic-code-"
        >Executing synergetic contracts</a
    >
</li>

    </ul>
</li> 
<li>
    <a href="../../smart-contracts/memory/" id="smart-contracts-memory-"
        >Memory</a
    >
</li>
 
<li>
    <a href="../../smart-contracts/fees/" id="smart-contracts-fees-"
        >Fees</a
    >
</li>
 
<li>
    <a href="../../smart-contracts/wallets/" id="smart-contracts-wallets-"
        >Wallets</a
    >
</li>

    </ul>
</li> 
<li>
    <span class="head">Tutorials</span>
    <ul id="header_tutorials"> 
<li>
    <a href="../../tutorials/" id="tutorials-"
        >Introduction</a
    >
</li>
 
<li>
    <a href="../../tutorials/fet1/" id="tutorials-fet1-"
        >Create FET-1 contract</a
    >
</li>
 
<li>
    <a href="../../tutorials/python-deployment/" id="tutorials-python-deployment-"
        >Deploying an Etch contract with Python</a
    >
</li>
 
<li>
    <a href="https://www.youtube.com/watch?v=mwkAUh-_uxA&list=PL09jEkqdEp94oV7XYsHvfvHwMTBC0QfwJ" id="https:--www.youtube.com-watch?v=mwkAUh-_uxA&list=PL09jEkqdEp94oV7XYsHvfvHwMTBC0QfwJ"
        >Videos</a
    >
</li>

    </ul>
</li> 
    </ul>
</nav>
                    </div>
                </div> <!-- .book-summary end -->

                <div class="book-body">
                    <div class="body-inner" id="book-body">

                        <div class="page-wrapper" tabindex="-1" role="main">
                            <div class="page-inner" id="book-body-inner">

                                <section class="normal markdown-section p17">

                                    

<h1 id="part-3-deploying-and-interacting-with-smart-contracts-on-fetch"><em>Part 3: Deploying and interacting with smart contracts on Fetch</em></h1>
<p>Let’s talk a little about smart contracts and how we deploy them using Fetch, and the Python API. At the end of this part, you’ll understand how to deploy a contract and how to interact with it. You’ll be able to see it on the block explorer and view its source. We’ll go through this before falling back to talking about encryption and private key management: this way, we’ll have covered all the main things that you’ll want to do:</p>
<ol>
<li>Generating addresses, in <a href="../creating-addresses/">part 1</a></li>
<li>Performing transactions, in <a href="../transfers-and-balances/">part 2</a></li>
<li>Deploying and interacting with contracts, in this part</li>
</ol>
<p>We’ll have explored the first two both programmatically in Python using our Ledger API, and using our command line tool <code>pocketbook</code>. </p>
<p>First things first. What <em>is</em> a smart contract? You’ll find lots of different refinements out there on the definition, but effectively:</p>
<blockquote>
<p>A Smart Contract is an agreement with the terms defined as a computer program. The contract exists on a decentralised network, and its execution and transactions can be tracked by anyone and are irreversible. All parties involved can be defined and enforced by the contract and no central authority is required for it to operate.</p>
</blockquote>
<p>In practice, most people’s interaction with a smart contract is through those that handle the issuance of <em>tokens</em>, such as the well known ethereum ERC20. Most token contracts are either <em>fungible</em> or <em>non-fungible</em>. Non-fungible tokens (NFT) are like collectables: they cannot be split. An example would be a baseball collector’s card, you can’t cut it in half and have two that are worth 50% of the original. One of the most well-known of these is <a href="https://www.cryptokitties.co/">Cryptokitties</a>. Fungible can be split, and are used for most token issuance. The circulating supply, the issuance foundation and the list of where the tokens are are held and enforced by a smart contract. Most fungible tokens on ethereum are based on ERC20, and most NFTs ERC721. Non-native FET tokens are ERC20. </p>
<h2 id="a-simple-token-contract">A simple token contract</h2>
<p>In today’s tutorial, we are going to deploy a simple fungible token contract and make some calls to it. We will then transfer some of our new tokens to some owners.</p>
<p>First things first, let’s look at the Etch code for a simple fungible token:
<div class="highlight"><pre><span></span>//------------------------------------------------------------------------------
//
//   Copyright 2019 Fetch.AI Limited
//
//   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
//   you may not use this file except in compliance with the License.
//   You may obtain a copy of the License at
//
//       http://www.apache.org/licenses/LICENSE-2.0
//
//   Unless required by applicable law or agreed to in writing, software
//   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
//   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//   See the License for the specific language governing permissions and
//   limitations under the License.
//
//------------------------------------------------------------------------------

persistent sharded balance_state : UInt64;
persistent supply_state : UInt64;

@init
function init(owner: Address)

    use supply_state;
    use balance_state[owner];

    supply_state.set(100000u64);
    balance_state.set(owner, 100000u64);

endfunction

@query
function getName(): String

    return (&quot;Fet-1 Fungible token&quot;);

endfunction


@query
function totalSupply(): UInt64

    use supply_state;
    return supply_state.get();

endfunction


@query
function balanceOf(address: Address) : UInt64

    use balance_state[address];
    return balance_state.get(address, 0u64);

endfunction

@action
function transfer(from: Address, to: Address, value: UInt64) : Int64

    if(!from.signedTx())
      return 1i64;
    endif

    use balance_state[from, to];
    var from_balance = balance_state.get(from, 0u64);
    var to_balance = balance_state.get(to, 0u64);

    if(from_balance &lt; value)
      return 2i64;
    endif

    var u_from = from_balance - value;
    var u_to = to_balance + value;

    balance_state.set(from, u_from);
    balance_state.set(to, u_to);
    return 0i64;

endfunction
</pre></div>
This is a relatively straightforward, simplified token. It has several functions that support its operation. They fall into three categories:</p>
<ol>
<li><em>Initialisation</em> (labeled with <code>@init</code>). There is one of these, and it is called when the token contract is deployed.</li>
<li><em>Queries</em> (labeled with <code>@query</code>). There can be many of these. They do not alter state, and they return a value to the caller. In this contract, they are used to return total supply, contract name and get the balance of an address.</li>
<li><em>Actions</em> (labeled with <code>@action</code>). There can be many of these. They perform actions, can alter state and return a value. Our contract has one of them (<code>transfer</code>), and it is for transferring tokens from one address to another. The source of the transfer has to be the caller of the <code>@action</code></li>
</ol>
<p>You can find the documentation on Etch at https://docs.fetch.ai/etch-language/</p>
<h2 id="deploying-and-interacting-with-a-contract">Deploying and interacting with a contract</h2>
<p>Let’s now deploy our contract. Here’s some Python, which we’ll break down afterwards:
<div class="highlight"><pre><span></span>import sys
from fetchai.ledger.api import LedgerApi, TokenApi
from fetchai.ledger.contract import Contract
from fetchai.ledger.crypto import Entity, Address

# The contract we&#39;re going to load:
contract_name = &#39;Fet1.etch&#39;

# this gets us an API connected to the testnet endpoint:
try:
    api = LedgerApi(network=“testnet&quot;)
except Exception as e:
    sys.exit(e)

# load the contract and perform some basic checks on it:
try:
    contract_text = open(contract_name, &#39;r&#39;).read()
except IOError as e:
    sys.exit(&#39;File not found&#39;)

if 0 == len(contract_text):
    print (&quot;Contract is zero length.&quot;)
    sys.exit(&quot;Invalid contract&quot;)

# some simple stats, a bit messy, as the Python API does have this information
# but it isn’t yet exposed (January 28th 2020). Future versions will expose actions
# and queries, so non-optimal parsers like the below will absolutely not be 
# necessary!
lines = 0
queries = 0
actions = 0
for line in contract_text.splitlines():
    lines = lines + 1   
    line = line.strip()
    if &quot;@query&quot; == line:
        queries = queries + 1
    elif &quot;@action&quot; == line:
        actions = actions + 1

# private key for deploying from 
# *WARNING* putting an unencrypted private key in a script
# is a terrible idea! Future tutorials will deal with this.
entity = Entity(b’… your private key here …’)
address = Address(entity)

# perform the deployment now:
print (&quot;Deploying contract:&quot;, contract_name, &#39;\n&#39;)
print (&quot;  Owner:&quot;, address)
print (&quot; Length:&quot;, len(contract_text), &quot;byte(s)&quot;)
print (&quot;  Lines:&quot;, lines)
print (&quot;Queries:&quot;, queries)
print (&quot;Actions:&quot;, actions)

try:
    contract = Contract(contract_text, entity)
    api.sync(contract.create(api, entity, 600000), None, 0)
except Exception as e:
    sys.exit(e);

# deployed. Announce address and owner:
print (&#39;\nContract deployed:\n&#39;)
print (&#39;Address:&#39;, contract.address)
print (&#39;  Owner:&#39;, contract.owner)

# perform a couple of confirmation queries:
print (&#39;\nFet-1 test calls:\n&#39;)
print (&quot; Total supply:&quot;, contract.query(api, &#39;totalSupply&#39;))
print (&quot;Owner balance:&quot;, contract.query(api, &#39;balanceOf&#39;, address=address))
print (&quot;Declared name:&quot;, contract.query(api, &#39;getName&#39;))
</pre></div>
This assumes that you have saved the fungible token as <code>Fet1.etch</code>, and that you have added a private key where noted. If you then run the above, having taken these two steps, it will deploy the contract to testnet for you. You’ll see something like this:
<div class="highlight"><pre><span></span>$ python3 deploy.py
Deploying contract: Fet1.etch 

  Owner: 2uGQSyM56XfkaFeoyYib2dt4rvFwVZ6if5JREZd54d1sNehEQ5
 Length: 1978 byte(s)
  Lines: 81
Queries: 3
Actions: 1

Contract deployed:

Address: 2VRHNEDBNfgind7NLmgcGbSvCqc4LX8bMt9Tw9gfyMyk5HXjFS
  Owner: 2uGQSyM56XfkaFeoyYib2dt4rvFwVZ6if5JREZd54d1sNehEQ5

Fet-1 test calls:

 Total supply: 100000
Owner balance: 100000
Declared name: Fet-1 Fungible token
$
</pre></div>
So let’s look at some of the key things. You’ll recognise much of the code from the examples in <a href="LINK">Part 1</a>, but here’s the magic bit that actually deploys the contract to the Fetch ledger:
<div class="highlight"><pre><span></span>try:
    contract = Contract(contract_text, entity)
    api.sync(contract.create(api, entity, 600000), None, 0)
except Exception as e:
    sys.exit(e);
</pre></div>
The 600000 value is the gas fee for deployment. It’s in 10,000,000’s of a FET (canonical FET). The exception handler ensures that you see the error neatly if there are deployment issues.</p>
<p>After we’ve deployed, we’re able to get information about the contract out, such as its address. We use <code>contract.address</code> to recall the address on the ledger. This also ensures that we can easily interact with it in the future (although you can track this stuff down on the block explorer!)</p>
<p>We then call all three of the <code>@query</code>s in the contract:
<div class="highlight"><pre><span></span>print (&quot; Total supply:&quot;, contract.query(api, &#39;totalSupply&#39;))
print (&quot;Owner balance:&quot;, contract.query(api, &#39;balanceOf&#39;, address=address))
print (&quot;Declared name:&quot;, contract.query(api, &#39;getName&#39;))
</pre></div>
Note that we’re getting the balance of the contract’s owner, which will be <em>all the tokens</em>, at this stage. If all has worked, you’ll see the total supply and balance as the same values. We then call the <code>@action</code> to send some tokens to another address:
<div class="highlight"><pre><span></span># Now send someone some tokens:
target_for_tokens = Address(&#39;2pMdjmCczv3n1cF7kWSLV4cBSgXt6VmiudzhxGFNnNPJwBUAv9&#39;)
print (&#39;\nAttempting to transfer 100 tokens to &#39;, target_for_tokens)
try:
    tx_hash = contract.action(api, &#39;transfer&#39;, 60000, [entity], address, target_for_tokens, 100)
    api.sync(tx_hash)
except Exception as e:
    sys.exit(e);

print (&#39;\nTransfer of tokens complete:\n&#39;)
print (&#39;       TX hash:&#39;, tx_hash)
print (&#39; Owner balance:&#39;, contract.query(api, &#39;balanceOf&#39;, address=address))
print (&#39;Target balance:&#39;, contract.query(api, &#39;balanceOf&#39;, address=target_for_tokens))
</pre></div>
So let’s unpack what’s going on here. Firstly, we’re declaring an address that we’re going to be sending some tokens to. Then we use <code>contract.action</code> to create the transaction to perform the action. The return from this is the <em>transaction hash</em>. You can add a <code>0x</code> to the front of this and look it up in the appropriate block explorer to see details (https://explore.fetch.ai for mainnet and https://explore-testnet.fetch.ai for testnet). We then use <code>api.sync</code> with this transaction hash so that we can wait for it to complete, and therefore show any errors that might occur. Assuming all is good, then we’ll show the transaction’s hash and then the owner and target balance after the operation. In the above case, we see this:
<div class="highlight"><pre><span></span>Attempting to transfer 100 tokens to  2pMdjmCczv3n1cF7kWSLV4cBSgXt6VmiudzhxGFNnNPJwBUAv9

Transfer of tokens complete:

       TX hash: 81527b814fe50a1f9c00220813fe2e04570792401e529682a0453a086849a8e3
 Owner balance: 99900
Target balance: 100
$ 
</pre></div>
Neat, eh? </p>
<h2 id="interacting-with-an-already-deployed-contract">Interacting with an already deployed contract</h2>
<p>So, obviously, there is a catch with what we’ve done. Once the program completes, we no longer have a way of interacting with the contract that we’ve deployed, so we can’t send <em>more</em> tokens to <em>someone else</em> at a later date. Well, actually, we can! And we do it as a two-step process:</p>
<ol>
<li>We serialise out the contract that we create as a JSON file when we do the initial deployment</li>
<li>We read a contract object from the serialised JSON file and then interact with that</li>
</ol>
<p>So let’s look at how we do this:
<div class="highlight"><pre><span></span>try:
    contract = Contract(contract_text, entity)
    api.sync(contract.create(api, entity, 600000), None, 0)

    with open(&#39;contract_data.json&#39;, &#39;w&#39;) as contract_info:
        contract.dump(contract_info)

except Exception as e:
    sys.exit(e);
</pre></div>
This replaces the code which does the contract create at the moment. You’ll see that now, we’ve added two extra lines that will save the contract as a JSON file. We can <em>reconstitute</em> the contract from this file to allow us to interact with it further. Here is a new Python script which you can save as <code>interact_with_existing.py</code>:
<div class="highlight"><pre><span></span>import sys
from fetchai.ledger.api import LedgerApi, TokenApi
from fetchai.ledger.contract import Contract
from fetchai.ledger.crypto import Entity, Address

# this gets us an API connected to the testnet endpoint:
try:
    api = LedgerApi(network=&quot;testnet&quot;)
except Exception as e:
    sys.exit(e)

# create a contract from our previously saved one:
try:
    with open(&#39;contract_data.json&#39;, &#39;r&#39;) as contract_info:
        contract = Contract.load(contract_info)
except Exception as e:
    sys.exit(e)

# us as owner, with private key:    
entity = Entity(b&#39;4\x1f\x00\xf7\x89\x00c\xee\xfd5h\xf2\xf5\xc7\xc3\x10\x80/\xd3+:\x15\xa1\x11\xac\x0f\xbf\xb4\xa6\\\xe0{&#39;)
address = Address(entity)

# let&#39;s show stats, and then send some more tokens:
print (&#39;\nCurrent token status:\n&#39;)
print (&quot; Total supply:&quot;, contract.query(api, &#39;totalSupply&#39;))
print (&quot;Owner balance:&quot;, contract.query(api, &#39;balanceOf&#39;, address=address))
print (&quot;Declared name:&quot;, contract.query(api, &#39;getName&#39;))

# Now send someone some tokens:
target_for_tokens = Address(&#39;2pMdjmCczv3n1cF7kWSLV4cBSgXt6VmiudzhxGFNnNPJwBUAv9&#39;)
print (&#39;\nAttempting to transfer 100 tokens to &#39;, target_for_tokens)
try:
    tx_hash = contract.action(api, &#39;transfer&#39;, 60000, [entity], address, target_for_tokens, 100)
    api.sync(tx_hash)
except Exception as e:
    sys.exit(e);

print (&#39;\nTransfer of tokens complete:\n&#39;)
print (&#39;          TX hash:&#39;, tx_hash)
print (&#39; Owner balance:&#39;, contract.query(api, &#39;balanceOf&#39;, address=address))
print (&#39;Target balance:&#39;, contract.query(api, &#39;balanceOf&#39;, address=target_for_tokens))
</pre></div>
And when run, we now load the previously deployed contract and transfer an additional 100 tokens to the same address as we did in the creation script:
<div class="highlight"><pre><span></span>$ python3 interact_with_existing.py

Current token status:

 Total supply: 100000
Owner balance: 99900
Declared name: Fet-1 Fungible token

Attempting to transfer 100 tokens to  2pMdjmCczv3n1cF7kWSLV4cBSgXt6VmiudzhxGFNnNPJwBUAv9

Transfer of tokens complete:

          TX hash: f5b2277cf779b6b5a91b48c790f889a0e2599d3b6559933f823f13d227e46fa2
 Owner balance: 99800
Target balance: 200
$
</pre></div>
Now this is all a “bit manual” at this stage. We don’t have command line parameters for interacting sensibly, we have to edit files all the time, and we’re storing the private key in the file, but we do have <em>all the components</em> in this tutorial to 1) create a contract, 2) interact with it, 3) save it for later interactions and 4) load it for subsequent interactions. </p>
<p>It’s pretty straightforward to deploy a token contract using this tutorial, and we recommend that you do. If you mention your token details in the developer Slack, you may find an interest in collecting them for testing purposes! </p>
<p>As with previous examples, everything you see above will work on both main net and testnet — just change the <code>api = LedgerApi(network=’testnet’)</code> line accordingly.</p>


                                </section>

                            </div> <!-- .page-inner end -->

                            <div class="bottomnav">
                                
                                <a href="../transfers-and-balances/" class="button left"><strong>Previous:</strong></br>Making Transfers</a>
                                
                                <a href="../../ledger/" class="button right"><strong>Next:</strong></br>Introduction</a>
                            </div><!-- .bottomnav end -->

                        </div> <!-- .page-wrapper end -->

                    </div> <!-- .body-inner end -->
                </div> <!-- .book-body end -->

            </div><!-- .book end -->
        </div><!-- #content-wrap -->

        <footer>
            <div class="corset">
                <div class="col-1">
                    <div class="social">
                        <a href="https://t.me/fetch_ai" target="_blank"><i class="fab fa-telegram-plane" aria-hidden="true"></i></a>
                        <a href="https://twitter.com/fetch_ai?lang=en" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                        <a href="https://www.linkedin.com/company/fetch-ai/" target="_blank"><i class="fab fa-linkedin" aria-hidden="true"></i></a>
                        <a href="https://www.youtube.com/c/FetchAI" target="_blank"><i class="fab fa-youtube" aria-hidden="true"></i></a>
                        <a href="https://medium.com/fetch-ai" target="_blank"><i class="fab fa-medium-m" aria-hidden="true"></i></a>
                        <a href="https://github.com/fetchai" target="_blank"><i class="fab fa-github" aria-hidden="true"></i></a>
                    </div>
                </div>
                <div class="col-2">Copyright © <a href="https://fetch.ai">Fetch.ai</a> <span class="year">2019</span></div>
            </div>
        </footer>
    </div><!-- end #page-container -->

    <link rel="stylesheet" id="font-awesome-css" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" type="text/css" media="all">
    <script src="../../js/main.js"></script>
    <script src="../../js/menu.js"></script>
    <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
    <script src="../../search/main.js"></script>
</body>

</html>